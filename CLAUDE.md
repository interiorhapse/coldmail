# ColdMail í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸

> **ì¤‘ìš”**: ìƒˆ ì„¸ì…˜ ì‹œì‘ ì‹œ ì´ íŒŒì¼ì„ ë°˜ë“œì‹œ ë¨¼ì € ì½ì–´ì£¼ì„¸ìš”.
> ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-09
>
> **ìë™ ì—…ë°ì´íŠ¸**: ì‘ì—… ì™„ë£Œ ì‹œ ì´ íŒŒì¼ê³¼ Git ì»¤ë°‹ì€ ìë™ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ì„œë¹„ìŠ¤ ì„¤ëª…
- **ì„œë¹„ìŠ¤ëª…**: ColdMail - AI ê¸°ë°˜ ì½œë“œë©”ì¼ ìë™í™” ì„œë¹„ìŠ¤
- **ëª©ì **: B2B ì˜ì—…ìš© ì½œë“œë©”ì¼ ìë™í™” (ê¸°ì—… ìˆ˜ì§‘ â†’ AI ë¶„ì„ â†’ ê°œì¸í™” ë©”ì¼ ìƒì„± â†’ ë°œì†¡)
- **ì‚¬ìš©ì**: GPTko AIì‚¬ì—…íŒ€ ë‚´ë¶€ ì‚¬ìš©

### 1.2 PRD ìœ„ì¹˜
```
c:\Users\jewel\Downloads\coldmail-prd.md
```

### 1.3 ê¸°ìˆ  ìŠ¤íƒ
| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| Frontend | Next.js 14 (Pages Router), Tailwind CSS |
| Backend | Next.js API Routes |
| Database | Supabase (PostgreSQL) |
| AI | Google Gemini 2.0 Flash |
| Email | Resend |
| í¬ë¡¤ë§ | Python 3.14 (requests, BeautifulSoup, Gemini HTTP API) |

---

## 2. í™˜ê²½ ì„¤ì •

### 2.1 ê°œë°œ ì„œë²„
```bash
cd C:\Projects\coldmail
npm run dev -- -p 3001
```
- URL: http://localhost:3001

### 2.2 í™˜ê²½ë³€ìˆ˜ (.env.local)
```
NEXT_PUBLIC_SUPABASE_URL=https://aekthtdeuqbxasahhnfp.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...
GEMINI_API_KEY=AIza...
RESEND_API_KEY=re_...
SENDER_EMAIL=jeweleg@gptko.co.kr
SENDER_NAME=GPTko AIì‚¬ì—…íŒ€
```

### 2.3 ë‹´ë‹¹ì ì •ë³´
| ì´ë¦„ | ì´ë©”ì¼ | ì „í™”ë²ˆí˜¸ | ì—­í•  |
|------|--------|----------|------|
| ì†¡ì œì„± íŒ€ì¥ | jeweleg@gptko.co.kr | 010-7204-9650 | admin |
| ì„ì¤€ìš© ëŒ€ë¦¬ | pillars3333@gptko.co.kr | - | user |

---

## 3. í•µì‹¬ ê·œì¹™

### 3.1 "11" ê·œì¹™
ì‚¬ìš©ìê°€ **"11"**ì´ë¼ê³  í•˜ë©´:
1. ìˆ˜ì • í›„ **ì—°ê´€ëœ íŒŒì¼ë“¤ ëª¨ë‘ ì²´í¬**
2. **ìŠ¤í…ë°”ì´ìŠ¤í…** ì •í™•í•˜ê²Œ ì‘ì—…
3. ì‹œê°„ ë“¤ì—¬ì„œ ê¼¼ê¼¼í•˜ê²Œ
4. ì—®ì—¬ ìˆëŠ” ê²ƒë“¤ ë¹ ì§ì—†ì´ ìˆ˜ì •

### 3.2 "12" ê·œì¹™
ì‚¬ìš©ìê°€ **"12"**ë¼ê³  í•˜ë©´:
1. **ë°”ì´ë¸Œ ì½”ë”© ê°œë°œë‚œì´ë„ ê³ ë ¤**
2. ë³µì¡í•œ ê¸°ëŠ¥ì€ ë‹¨ìˆœí™” ì œì•ˆ
3. í˜„ì‹¤ì ì¸ êµ¬í˜„ ë°©ì•ˆ ìš°ì„ 

### 3.3 UX ì›ì¹™
- confirm/alert ëŒ€ì‹  **Toast ì•Œë¦¼** ì‚¬ìš© (ìë™ ì‚¬ë¼ì§)
- ë°œì†¡ ê°™ì€ ì¤‘ìš” ì‘ì—…ì€ **í™•ì¸ íŒì—…** í•„ìˆ˜
- ì„ íƒ ì‹œ **í•˜ë‹¨ ê³ ì • ì•¡ì…˜ë°”** ì‚¬ìš© (í‘œ ìœ„ì— ì•¡ì…˜ë°” X)
- ì´ëª¨ì§€ ì‚¬ìš© ê¸ˆì§€ (ì´ë©”ì¼ì—ì„œ ì—‘ë°• ë¨)

---

## 4. ê¸°ëŠ¥ í˜„í™©

### 4.1 ì™„ë£Œëœ ê¸°ëŠ¥ âœ…
- [x] ì‚¬ìš©ì ì„ íƒ ë¡œê·¸ì¸
- [x] ëŒ€ì‹œë³´ë“œ (í†µê³„)
- [x] ê¸°ì—… ê´€ë¦¬ (CRUD, ê²€ìƒ‰, í•„í„°, í˜ì´ì§€ë„¤ì´ì…˜)
- [x] CSV ì—…ë¡œë“œ
- [x] AI ê¸°ì—… ë¶„ì„ (Gemini)
- [x] í…œí”Œë¦¿ ê´€ë¦¬
- [x] ë°œì†¡ ëŒ€ê¸°ì—´ ê´€ë¦¬ (ì¶”ê°€, ìˆ˜ì •, ì¡°íšŒ, ì‚­ì œ)
- [x] ë°œì†¡ ê¸°ëŠ¥ (Resend ì—°ë™)
- [x] ë°œì†¡ ì´ë ¥ ì¡°íšŒ
- [x] Toast ì•Œë¦¼ ì‹œìŠ¤í…œ
- [x] í•˜ë‹¨ ê³ ì • ì•¡ì…˜ë°” UX
- [x] ë°œì†¡ í™•ì¸ íŒì—…
- [x] ê¸°ì—… â†’ ë°œì†¡ëŒ€ê¸°ì—´ ì§í–‰ (ì´ˆì•ˆ ìŠ¤í‚µ)
- [x] ë°œì†¡ ëŒ€ê¸°ì—´ ìˆ˜ì •/ì¡°íšŒ ëª¨ë‹¬

### 4.2 í•´ì•¼ í•  ê¸°ëŠ¥ ğŸ”²

#### Phase 1: ìˆ˜ì§‘ ëª¨ë“ˆ (Python)
- [x] Python í¬ë¡¤ë§ í™˜ê²½ ì„¸íŒ…
- [x] ì‚¬ëŒì¸ í¬ë¡¤ëŸ¬
- [ ] ë¡œì¼“í€ì¹˜ í¬ë¡¤ëŸ¬
- [ ] ì›í‹°ë“œ í¬ë¡¤ëŸ¬
- [x] AI íŒŒì‹± (Gemini)
- [x] í¬ë¡¤ë§ ë°ì´í„° â†’ Supabase ì—°ë™
- [x] ìˆ˜ì§‘ ì„¤ì • UI (ì†ŒìŠ¤ ì„ íƒ, ì¼ì¼ í•œë„)

#### Phase 2: ì´ë©”ì¼ ê°œì„ 
- [ ] Resend ë„ë©”ì¸ ì¸ì¦ (gptko.co.kr)
- [ ] ì´ë©”ì¼ í…œí”Œë¦¿ HTML ë””ìì¸
- [ ] ë¡œê³  ì´ë¯¸ì§€ ì‚½ì… (`/images/logo.svg`)
- [ ] ë°œì†¡ ìŠ¤ì¼€ì¤„ë§

#### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥
- [ ] ì´ë©”ì¼ ì˜¤í”ˆ/í´ë¦­ ì¶”ì 
- [ ] ìë™ í›„ì† ë©”ì¼ (2ì°¨, 3ì°¨)
- [ ] A/B í…ŒìŠ¤íŠ¸
- [ ] ë¦¬í¬íŠ¸/ë¶„ì„

---

## 5. í´ë” êµ¬ì¡°

```
C:\Projects\coldmail\
â”œâ”€â”€ public/
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ logo.svg          # ê¸°ì—… ë¡œê³ 
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ crawler/              # Python í¬ë¡¤ëŸ¬
â”‚       â”œâ”€â”€ main.py           # ë©”ì¸ ì‹¤í–‰
â”‚       â”œâ”€â”€ config.py         # ì„¤ì •
â”‚       â”œâ”€â”€ run_crawler.bat   # ìë™ ì‹¤í–‰ìš©
â”‚       â”œâ”€â”€ sources/          # ìˆ˜ì§‘ ì†ŒìŠ¤ (ì‚¬ëŒì¸, ë¡œì¼“í€ì¹˜, ì›í‹°ë“œ)
â”‚       â”œâ”€â”€ parser/           # AI íŒŒì‹±
â”‚       â””â”€â”€ storage/          # Supabase ì—°ë™
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/               # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Toast.jsx     # í† ìŠ¤íŠ¸ ì•Œë¦¼
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfirmModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Table.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Badge.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Select.jsx
â”‚   â”‚   â”‚   â””â”€â”€ Tabs.jsx
â”‚   â”‚   â”œâ”€â”€ companies/        # ê¸°ì—… ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ CompanyList.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CompanyForm.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CompanyDetail.jsx
â”‚   â”‚   â”‚   â””â”€â”€ CsvUpload.jsx
â”‚   â”‚   â”œâ”€â”€ send/             # ë°œì†¡ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ SendQueue.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SendHistory.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ QueueEditModal.jsx  # ëŒ€ê¸°ì—´ ìˆ˜ì •/ì¡°íšŒ
â”‚   â”‚   â”‚   â””â”€â”€ AiDraftModal.jsx
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚       â”œâ”€â”€ Layout.jsx
â”‚   â”‚       â”œâ”€â”€ Header.jsx
â”‚   â”‚       â””â”€â”€ Sidebar.jsx
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ _app.jsx          # ToastProvider í¬í•¨
â”‚   â”‚   â”œâ”€â”€ index.jsx         # ë¡œê·¸ì¸
â”‚   â”‚   â”œâ”€â”€ dashboard.jsx
â”‚   â”‚   â”œâ”€â”€ companies/
â”‚   â”‚   â”‚   â””â”€â”€ index.jsx     # ê¸°ì—… ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ send/
â”‚   â”‚   â”‚   â””â”€â”€ index.jsx     # ë°œì†¡ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”‚   â””â”€â”€ index.jsx
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â””â”€â”€ index.jsx
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ auth/
â”‚   â”‚       â”‚   â”œâ”€â”€ login.js
â”‚   â”‚       â”‚   â””â”€â”€ users.js
â”‚   â”‚       â”œâ”€â”€ companies/
â”‚   â”‚       â”‚   â”œâ”€â”€ index.js      # GET/POST
â”‚   â”‚       â”‚   â”œâ”€â”€ [id].js       # GET/PUT/DELETE
â”‚   â”‚       â”‚   â”œâ”€â”€ industries.js
â”‚   â”‚       â”‚   â”œâ”€â”€ analyze.js    # AI ë¶„ì„
â”‚   â”‚       â”‚   â””â”€â”€ csv-upload.js
â”‚   â”‚       â”œâ”€â”€ send/
â”‚   â”‚       â”‚   â”œâ”€â”€ queue.js          # ëŒ€ê¸°ì—´ CRUD
â”‚   â”‚       â”‚   â”œâ”€â”€ queue-direct.js   # ê¸°ì—…â†’ëŒ€ê¸°ì—´ ì§í–‰
â”‚   â”‚       â”‚   â”œâ”€â”€ send.js           # ì‹¤ì œ ë°œì†¡
â”‚   â”‚       â”‚   â””â”€â”€ history.js
â”‚   â”‚       â”œâ”€â”€ templates/
â”‚   â”‚       â”‚   â””â”€â”€ index.js
â”‚   â”‚       â”œâ”€â”€ drafts/
â”‚   â”‚       â”‚   â”œâ”€â”€ index.js
â”‚   â”‚       â”‚   â””â”€â”€ generate.js   # AI ì´ˆì•ˆ ìƒì„±
â”‚   â”‚       â””â”€â”€ settings/
â”‚   â”‚           â”œâ”€â”€ index.js
â”‚   â”‚           â””â”€â”€ demo-links.js
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase.js       # Supabase í´ë¼ì´ì–¸íŠ¸ (ì§€ì—° ì´ˆê¸°í™”)
â”‚   â”‚   â”œâ”€â”€ gemini.js         # Gemini AI (ì§€ì—° ì´ˆê¸°í™”)
â”‚   â”‚   â”œâ”€â”€ resend.js         # Resend ì´ë©”ì¼ (ì§€ì—° ì´ˆê¸°í™”)
â”‚   â”‚   â””â”€â”€ utils.js          # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ globals.css
â”œâ”€â”€ .env.local                # í™˜ê²½ë³€ìˆ˜ (git ì œì™¸)
â”œâ”€â”€ CLAUDE.md                 # ì´ íŒŒì¼
â””â”€â”€ package.json
```

---

## 6. ë°ì´í„°ë² ì´ìŠ¤ (Supabase)

### 6.1 ì£¼ìš” í…Œì´ë¸”

| í…Œì´ë¸” | ì„¤ëª… |
|--------|------|
| users | ì‚¬ìš©ì |
| industries | ì—…ì¢… (22ê°œ) |
| companies | íƒ€ê²Ÿ ê¸°ì—… |
| mail_templates | ì´ë©”ì¼ í…œí”Œë¦¿ |
| drafts | AI ìƒì„± ì´ˆì•ˆ |
| send_queue | ë°œì†¡ ëŒ€ê¸°ì—´ |
| mail_logs | ë°œì†¡ ì´ë ¥ |
| signatures | ë°œì‹ ì ì„œëª… |
| settings | ì‹œìŠ¤í…œ ì„¤ì • |
| demo_links | ë°ëª¨ ë§í¬ |

### 6.2 companies í…Œì´ë¸” ì£¼ìš” ì»¬ëŸ¼
- `name`, `industry_id`, `website`
- `contact_name`, `contact_email`, `contact_phone`
- `priority` (high/medium/low)
- `bm_summary`, `news_summary` (AI ë¶„ì„ ê²°ê³¼)
- `send_status` (ë¯¸ë°œì†¡/1ì°¨ì™„ë£Œ/2ì°¨ì™„ë£Œ/3ì°¨ì™„ë£Œ)
- `send_count`, `last_send_date`

### 6.3 send_queue í…Œì´ë¸” ì£¼ìš” ì»¬ëŸ¼
- `company_id`, `to_email`
- `subject`, `body`
- `send_order` (1ì°¨/2ì°¨/3ì°¨)
- `status` (waiting/processing/complete/failed)
- `error_message`

---

## 7. API ì—”ë“œí¬ì¸íŠ¸

### 7.1 ê¸°ì—… ê´€ë¦¬
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | /api/companies | ëª©ë¡ ì¡°íšŒ |
| POST | /api/companies | ê¸°ì—… ì¶”ê°€ |
| GET | /api/companies/[id] | ìƒì„¸ ì¡°íšŒ |
| PUT | /api/companies/[id] | ìˆ˜ì • |
| DELETE | /api/companies/[id] | ì‚­ì œ |
| POST | /api/companies/analyze | AI ë¶„ì„ |
| POST | /api/companies/csv-upload | CSV ì—…ë¡œë“œ |

### 7.2 ë°œì†¡ ê´€ë¦¬
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | /api/send/queue | ëŒ€ê¸°ì—´ ì¡°íšŒ |
| POST | /api/send/queue | ëŒ€ê¸°ì—´ ì¶”ê°€ (ì´ˆì•ˆì—ì„œ) |
| PUT | /api/send/queue | ëŒ€ê¸°ì—´ ìˆ˜ì • |
| DELETE | /api/send/queue?id=xxx | ëŒ€ê¸°ì—´ ì‚­ì œ |
| POST | /api/send/queue-direct | ê¸°ì—…â†’ëŒ€ê¸°ì—´ ì§í–‰ |
| POST | /api/send/send | ì‹¤ì œ ë°œì†¡ |
| GET | /api/send/history | ë°œì†¡ ì´ë ¥ |

---

## 8. ì•Œë ¤ì§„ ì´ìŠˆ

### 8.1 ê¸´ê¸‰
- **Resend ë„ë©”ì¸ ë¯¸ì¸ì¦**: gptko.co.kr ë„ë©”ì¸ ì¸ì¦ í•„ìš”
  - í™•ì¸: https://resend.com/domains
  - ì¸ì¦ ì „ê¹Œì§€ ì´ë©”ì¼ ì‹¤ì œ ë°œì†¡ ì•ˆ ë¨

### 8.2 ê°œì„  í•„ìš”
- ì´ë©”ì¼ HTML í…œí”Œë¦¿ ë””ìì¸ í•„ìš”
- ë¡œê³  ì´ë¯¸ì§€ë¥¼ ì´ë©”ì¼ì— ì‚½ì…í•˜ëŠ” ë°©ë²• êµ¬í˜„ í•„ìš”

---

## 9. ìµœê·¼ ë³€ê²½ ì´ë ¥

### 2026-01-09
- **Python í¬ë¡¤ëŸ¬ ëª¨ë“ˆ ì™„ì„±** (`scripts/crawler/`)
  - ì‚¬ëŒì¸ í¬ë¡¤ëŸ¬ êµ¬í˜„ ë° ë°ì´í„° í’ˆì§ˆ ê°œì„ 
  - Gemini AI ì—°ë½ì²˜ ì¶”ì¶œ (HTTP API ì§ì ‘ í˜¸ì¶œ)
  - Supabase ì—°ë™ (HTTP REST API)
  - Python 3.14 í˜¸í™˜ì„± í™•ë³´ (SDK ëŒ€ì‹  HTTP API)
- ìˆ˜ì§‘ ì„¤ì • í˜ì´ì§€ UI ê°œì„ 
  - ìˆ˜ë™ ìˆ˜ì§‘ ë²„íŠ¼ ì¶”ê°€
  - Toast ì•Œë¦¼ ì—°ë™
- ê¸°ì—… ëª©ë¡ ìˆ˜ì§‘ì¼ ì‹œê°„ í‘œì‹œ (`formatDateTime`)
- "12" ê·œì¹™ ì¶”ê°€ (ë°”ì´ë¸Œ ì½”ë”© ë‚œì´ë„ ê³ ë ¤)

### 2026-01-08
- Toast ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬í˜„
- ë°œì†¡ ëŒ€ê¸°ì—´ ìˆ˜ì •/ì¡°íšŒ ëª¨ë‹¬ ì¶”ê°€
- ë°œì†¡ í™•ì¸ íŒì—… ì¶”ê°€
- í•˜ë‹¨ ê³ ì • ì•¡ì…˜ë°” UX ê°œì„ 
- ì„œëª… ì´ëª¨ì§€ ì œê±° (ì—‘ë°• ë¬¸ì œ)
- ê¸°ì—… â†’ ë°œì†¡ëŒ€ê¸°ì—´ ì§í–‰ ê¸°ëŠ¥
- ì´ˆì•ˆ ëª©ë¡ íƒ­ ì œê±° (ë¶ˆí•„ìš”)
- UX ì •ë ¬ ìˆ˜ì •
- CLAUDE.md ë¬¸ì„œ ìƒì„±
- ë¡œê³  ì´ë¯¸ì§€ í´ë” ìƒì„±

---

## 10. ë‹¤ìŒ ì„¸ì…˜ ì‹œì‘ ì‹œ

```
1. ì´ íŒŒì¼(CLAUDE.md) ì½ê¸°
2. ì‚¬ìš©ìì˜ ìš”ì²­ í™•ì¸
3. í•„ìš” ì‹œ ê´€ë ¨ íŒŒì¼ ì½ê¸°
4. ì‘ì—… ì§„í–‰
```

---

## 11. í¬ë¡¤ë§ ëª¨ë“ˆ ê°œë°œ ê°€ì´ë“œ (ì˜ˆì •)

ì‚¬ìš©ìê°€ í¬ë¡¤ë§ ëª¨ë“ˆ ê°œë°œ ìš”ì²­ ì‹œ ì•„ë˜ í”„ë¡¬í”„íŠ¸ ì°¸ê³ :

```
Python ê¸°ë°˜ ì´ë©”ì¼ ìˆ˜ì§‘ ëª¨ë“ˆ ê°œë°œ
- íƒ€ê²Ÿ: ë¡œì¼“í€ì¹˜, ì›í‹°ë“œ, êµ¬ê¸€ ê²€ìƒ‰
- ìˆ˜ì§‘ ì •ë³´: ê¸°ì—…ëª…, ë‹´ë‹¹ì, ì´ë©”ì¼, ì›¹ì‚¬ì´íŠ¸
- ê¸°ìˆ : Selenium, BeautifulSoup, fake-useragent
- ì¶œë ¥: Supabase companies í…Œì´ë¸”ì— ì§ì ‘ INSERT
- ìœ„ì¹˜: scripts/email_crawler.py
```

---

## 12. ìì£¼ ì“°ëŠ” ëª…ë ¹ì–´

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
cd C:\Projects\coldmail && npm run dev -- -p 3001

# ë¹Œë“œ
npm run build

# Supabase SQL ì—ë””í„°
# https://supabase.com/dashboard/project/aekthtdeuqbxasahhnfp/sql
```
